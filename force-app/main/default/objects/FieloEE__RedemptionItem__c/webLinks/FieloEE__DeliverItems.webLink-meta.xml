<?xml version="1.0" encoding="UTF-8"?>
<WebLink xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>FieloEE__DeliverItems</fullName>
    <availability>online</availability>
    <displayType>massActionButton</displayType>
    <linkType>javascript</linkType>
    <masterLabel>Deliver Items</masterLabel>
    <openType>onClickJavaScript</openType>
    <protected>false</protected>
    <requireRowSelection>true</requireRowSelection>
    <url>{!REQUIRESCRIPT("/soap/ajax/25.0/connection.js")}
{!REQUIRESCRIPT("/soap/ajax/15.0/apex.js")}

var itemsSelected = {!GETRECORDIDS( $ObjectType.FieloEE__RedemptionItem__c ) };

if(itemsSelected.length == 0){
    alert(&#39;{!$Label.fieloee__itemsrequired}&#39;);
}else{

var prefix = &#39;{!$Setup.FieloEE__PublicSettings__c.FieloEE__PackagePrefix__c}&#39;.replace(&#39;__&#39;, &#39;.&#39;);

var status = sforce.apex.execute( prefix+&#39;RedemptionUtil&#39;, &#39;deliverItems&#39;, {id: &#39;{!FieloEE__Redemption__c.Id}&#39;, itemsIds: itemsSelected });

alert(status);

location.reload();
}</url>
</WebLink>
